# 时间
## cpu频率
cpu的基础频率xxxGHz，指的是cpu内部的数字时钟信号频率，又称时钟频率；
### 频率的概念
在cpu的复杂的数字系统中，为了确保内部所有的硬件单元能够协同快速工作，cpu架构工程师们往往会设计一套时钟信号与系统同步进行操作。**时钟信号是由一系列的脉冲信号构成，并且总是按照一定的电压幅度、时间间隔连续发出的方波信号，它周期性的在0和1之间往复变化**
### cpu主频可变技术
CPU每一个核心都有自己的PLL(Phase Locked Loop, 锁相环)电路，这样每个核心的电压和频率都可以独立控制，通过使用cpu内部的PCU(power control unit)单元，实时监控四个核心的温度、电流、功耗等参数，同时根据cpu的负载调整cpu的频率；由于参与到运算的核心数量越多，则控制起来更加复杂，所以一般核心数目越多，能达到的最高频率就越低；
### 外频、倍频以及超频
主频 = 外频 X 倍频  
### cpu的频率来源
外部的晶体振荡器经过cpu内部的倍频电路形成cpu的频率；
## 时钟和定时器电路
### 实时时钟（RTC）
独立于cpu和所有其他芯片，即使pc被切断电源，RTC仍然在工作，CMOS RAM和RTC被集成在一个芯片上；  
RTC可以在IRQ8上发出周期性的中断；
### 时间戳计数器(TSC)
微处理器通过CLK输入引线接受外部振荡器的时钟信号，其内部包含一个计数器，在每个信号到来的时间加1；该计数器利用64位的时间戳计数器寄存器来实现，通过rdtsc汇编指令读取该寄存器的值；
### 可编程间隔定时器(PIT)
可以对PIT进行编程，使其以一定的频率向IRQ0发出时钟中断；
### cpu本地定时器
能够产生单步中断或周期性中断的设备，其只能将中断发给自己，基于总线的时钟信号，较低；
### 高精度事件定时器(HPET)
计数器可以最少每100ns增长一次；  
任何计数器最多可以与32个定时器相关联，每个定时器由一个比较器和一个匹配寄存器组成；比较器是由一组用于检测计数器中的值与匹配寄存器中的值进行匹配的电路，如果找到一组匹配值，就产生一个硬件中断；
### ACPI电源管理定时器
时钟信号拥有大约3.58MHz的固定频率；读取该值，需要访问某个I/O端口的值，在BIOS的初始化阶段确定；  
如果操作系统或者BIOS需要动态调频，则ACPI电源管理定时器就比TSC更加优越，因为TSC也会发生改变；  
HPET是时钟电路的首选；
